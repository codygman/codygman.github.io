<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>My Hakyll Blog - Getting the length of a webpage with haskell</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">My Hakyll Blog</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Getting the length of a webpage with haskell</h1>

            <div class="info">
    Posted on December 16, 2013
    
</div>

<p>I was wanting to see how many words were on a webpage today, so I opened up a python interpreter and typed in the following code:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="ch">import</span> urllib
webpage_content = urllib.urlopen(<span class="st">&quot;http://www.reddit.com&quot;</span>).read()
words = webpage_content.split()
<span class="dt">print</span> <span class="dt">len</span>(words)</code></pre>
<p>Very succinct code that does what I need it to. I’ve been using haskell lately though and wondered what it’s solution would look like. First I wrote a very imperative version:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import </span><span class="dt">Network.HTTP.Conduit</span>
<span class="kw">import qualified</span> <span class="dt">Data.ByteString.Lazy.Char8</span> <span class="kw">as</span> <span class="dt">BCL</span>

main <span class="fu">=</span> <span class="kw">do</span>
  putStrLn <span class="st">&quot;Enter a url: &quot;</span>
  url <span class="ot">&lt;-</span> getLine
  pageText <span class="ot">&lt;-</span> simpleHttp url
  <span class="kw">let</span> pageTextCount <span class="fu">=</span> length <span class="fu">.</span> words <span class="fu">.</span> BCL.unpack <span class="fu">$</span> pageText
  print <span class="fu">$</span> <span class="st">&quot;There are &quot;</span> <span class="fu">++</span> show pageTextCount <span class="fu">++</span> <span class="st">&quot; words!&quot;</span></code></pre>
<div style="text-align:center" markdown="1">
<a href="https://www.fpcomplete.com/user/codygman/getting-number-of-words-on-a-web-page-imperatively">Play with the code in an online IDE</a> (free signup required)
</div>
<p>This isn’t nearly as short as the python version, but its still pretty understandable to most. Having to unpack the lazy bytestring might throw a few off, but everything else is straightforward. After writing this, I realized I could use bind and functional composition to shorten things up even more than python!</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import </span><span class="dt">Network.HTTP.Conduit</span>
<span class="kw">import qualified</span> <span class="dt">Data.ByteString.Lazy.Char8</span> <span class="kw">as</span> <span class="dt">BCL</span>

main <span class="fu">=</span> <span class="kw">do</span>
    putStrLn <span class="st">&quot;Enter a url: &quot;</span>
    getLine <span class="fu">&gt;&gt;=</span> simpleHttp <span class="fu">&gt;&gt;=</span> print <span class="fu">.</span> length <span class="fu">.</span> BCL.words</code></pre>
<div style="text-align:center" markdown="1">
<a href="https://www.fpcomplete.com/user/codygman/getting-number-of-words-on-a-web-page-with-bytestrings">Play with the code in an online IDE</a> (free signup required)
</div>
<p>After that I wondered if I could use the (official?) Network.HTTP package easier, and made a very similar version with it.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import </span><span class="dt">Network.HTTP</span>

main <span class="fu">=</span> <span class="kw">do</span>
    putStrLn <span class="st">&quot;Enter a url: &quot;</span>
    getLine <span class="fu">&gt;&gt;=</span> simpleHTTP <span class="fu">.</span> getRequest <span class="fu">&gt;&gt;=</span> getResponseBody <span class="fu">&gt;&gt;=</span> print <span class="fu">.</span> length <span class="fu">.</span> words</code></pre>
<div style="text-align:center" markdown="1">
<a href="https://www.fpcomplete.com/user/codygman/getting-length-of-website-in-haskell">Play with the code in an online IDE</a> (free signup required)
</div>
<p>Hope this helps :)</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
